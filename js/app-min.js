define(["jquery","text!template/form.html","text!dist/style.css"],function(t,e,a,r,o){"use strict";var n;return{init:function(i){n=i;var c=t("<style></style>",{type:"text/css"});c.text(a),t("head").append(c);var s=t("<style></style>",{type:"text/css"});s.text(r),t("head").append(s);var l=t("<style></style>",{type:"text/css"});l.text(o),t("head").append(l),t("#RootRezWidget").append(e),t("#rootrez-widget-form"),function(e){if(""!=e.default_checkin){t("#Checkin").val(e.default_checkin);var a=new Date(e.default_checkin),r=new Date(e.default_checkin);r.setDate(a.getDate()+1);var o=r.getDate(),n=r.getMonth()+1,i=r.getFullYear();o<10&&(o="0"+o),n<10&&(n="0"+n);var c=n+"-"+o+"-"+i;t("#Checkout").val(c),t("#rootrez_daterangepicker").text(e.default_checkin+" to "+c)}if(""==e.min_checkin){var s=new Date,l=s.getDate(),d=s.getMonth()+1,u=s.getFullYear();l<10&&(l="0"+l),d<10&&(d="0"+d);var f=d+"-"+l+"-"+u;e.min_checkin=f}var h={minDate:e.min_checkin,maxDate:e.max_checkout,dateLimit:{days:28},applyClass:"",cancelClass:"",buttonClasses:""};t("#rootrez-widget-form #rootrez_daterangepicker").daterangepicker(h,function(e,a){t("#rootrez_daterangepicker").html(e.format("MMM D, YYYY")+" &rarr; "+a.format("MMM D, YYYY")),t("#Checkin").val(e.format("MM/DD/YYYY")),t("#Checkout").val(a.format("MM/DD/YYYY"))}),""!=e.submission_url?t("#rootrez-widget-form").attr("action",e.submission_url):t('#rootrez-widget-form button[type="submit"]').attr("disabled","disabled")}(n),t.ajax({url:"http://alta.publisher.localhost/discounts/for_widget",type:"GET",crossDomain:!0,success:function(t){console.log(t)},error:function(t,e){console.log(e)}})}}});